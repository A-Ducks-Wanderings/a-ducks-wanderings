{
	id: "charles",
	prototype: ["player_controlled"],
	friction: 2000,
	editor_info: {
		category: "charles"
	},

/* --- handle animations --- */

	on_end_stand_anim: "[
		set(animation, 'stand') // loop the stand animation
	]",

	on_end_attack_anim: "[
		set(animation, 'stand') // set the animation to stand after attacking
	]",

	on_end_crouch_anim: "[
		set(animation, 'stand')
	]",

	on_end_walk_anim: "[
		set(animation, 'walk') // loop the walk animation
	]",

	on_end_jump_anim: "[
		set(animation, 'fall')
	]",

/* --- handle key presses --- */

	on_ctrl_tongue: "[
		if(animation in ['stand', 'walk'],
		[
			set(animation, 'attack')
		]
		)
		]",

	on_ctrl_down: "[
		if(animation in ['stand', 'walk'],[
				set(animation, 'crouch')
			]
		)
	]",

	on_ctrl_jump: "[
		if(animation in ['stand', 'walk'],
			[
				set(animation, 'jump') // jump
			]
		)
	]",

/* --- processes --- */

	on_process: "[
			if((ctrl_left or ctrl_right) and animation in ['stand'],
				[
					set(animation, 'walk') // walk
				]
			),
			if(animation in ['jump', 'fall'],
				[
					if(ctrl_left, [
						set(facing, -1),
						add(velocity_x, -50)
					]),
					if(ctrl_right, [
						set(facing, 1),
						add(velocity_x, 50)
					])
				]
			)
		]",

	on_process_crouch: "[
		if(time_in_animation = 15 and ctrl_down, 
			[
				add(time_in_animation, -1)
			]
		)
	]",

	on_process_attack: "[
		if((ctrl_left or ctrl_right),
				[
					set(facing, if(ctrl_left, -1, 1)),
					add(velocity_x, if(ctrl_left, -50, 50))
				]
		),
	]",

	on_process_walk: "[
		if(not (ctrl_left or ctrl_right),
		[
			set(animation, 'stand') // stop walking if keys not pressed
		],
		[
			set(facing, if(ctrl_left, -1, 1)) // make sure we're facing the right direction
		]
		)
	]",

	on_process_jump: "[
		if(ctrl_jump, [
			add(velocity_y, -100)
		]
		)
	]",

/* --- other events --- */

	on_collide_feet: "[
		set(animation, 'stand') // on feet collision, stand
	]",

	on_change_animation_failure: "[
		set(animation, 'normal')
	]",

	animation: [
	{
		id: "stand",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 2, 33, 33],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 6,
		frames: 4,
		accel_x: 0,
		accel_y: 80
	},
	{
		id: "crouch",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 177, 33, 208],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 6,
		frames: 3,
		accel_x: 0,
		accel_y: 80
	},
	{
		id: "fall",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 107, 33, 138],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 6,
		frames: 2,
		accel_y: 80
	},
	{
		id: "jump",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 142, 33, 173],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 6,
		frames: 2,
		accel_x: 0,
		accel_y: 80,
		velocity_y: -1200
	},
	{
		id: "walk",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 72, 33, 103],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 4,
		frames: 4,
		accel_x: 1500,
		accel_y: 80
	},
	{
		id: "attack",
		image: "characters/charles-spritesheet1.png",
		rect: [2, 37, 33, 68],
		solid_area: [10, 4, 21, 33],
		pad: 3,
		duration: 6,
		frames: 4,
		accel_y: 80
	},

	]
}